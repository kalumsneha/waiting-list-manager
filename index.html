<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>FIFO Waiting List Manager</title>
<style>
body{font-family:Arial,sans-serif;background:#f4f6f8;margin:0;padding:20px}
h2{text-align:center}
.controls,.limit-controls{max-width:900px;margin:15px auto;display:flex;gap:10px}
input{flex:1;padding:10px;border-radius:6px;border:1px solid #ccc}
button{padding:10px 15px;border-radius:6px;border:none;cursor:pointer;background:#1976d2;color:white;font-weight:bold}
button:hover{background:#125aa0}
.container{display:flex;gap:20px;max-width:900px;margin:auto}
.panel{flex:1;background:white;padding:15px;border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,.1)}
.panel h3{text-align:center;margin-top:0}
.list{min-height:300px;border:2px dashed #ccc;border-radius:8px;padding:10px}
.item{display:flex;justify-content:space-between;align-items:center;background:#e3f2fd;margin:6px 0;padding:8px 10px;border-radius:6px}
.item.incourt{background:#c8e6c9}
.arrow{cursor:pointer;font-size:18px;user-select:none;padding-left:10px}
.disabled{opacity:.4;pointer-events:none}
.stats{font-size:12px;opacity:.7;margin-left:6px}
.actions{display:flex;align-items:center;gap:6px}
</style>
</head>
<body>

<h2>üè∏ FIFO Waiting List Manager</h2>

<div class="limit-controls">
<input type="number" id="maxInCourt" placeholder="Max in-court players" min="1" />
<button onclick="setLimit()">Set Limit</button>
</div>

<div class="controls">
<input type="text" id="nameInput" placeholder="Enter names (comma separated)" />
<button onclick="addToWaitingList()">Add to Waiting List</button>
</div>

<div class="container">
<div class="panel">
<h3>‚è≥ Waiting List (FIFO)</h3>
<div id="waitingList" class="list"></div>
</div>

<div class="panel">
<h3>üèüÔ∏è In-Court List</h3>
<div id="inCourtList" class="list"></div>
</div>
</div>

<script>
let state={waiting:[],incourt:[],maxInCourt:Infinity,stats:{}};

if(localStorage.getItem('fifoState')) state=JSON.parse(localStorage.getItem('fifoState'));

function save(){localStorage.setItem('fifoState',JSON.stringify(state));}

function setLimit(){const v=parseInt(document.getElementById('maxInCourt').value);if(!isNaN(v)&&v>0){state.maxInCourt=v;save();render();}}

function render(){
const w=document.getElementById('waitingList');
const c=document.getElementById('inCourtList');
w.innerHTML='';c.innerHTML='';

state.waiting.forEach((name,i)=>{
const div=document.createElement('div');div.className='item';
const stats=state.stats[name]||0;
const arrow=document.createElement('span');arrow.className='arrow';arrow.innerHTML='‚û°Ô∏è';
if(i!==0||state.incourt.length>=state.maxInCourt)arrow.classList.add('disabled');
arrow.onclick=()=>moveToInCourt(i);

div.innerHTML=`<span>${name}<span class='stats'>(games: ${stats})</span></span>`;
div.appendChild(arrow);w.appendChild(div);
});

state.incourt.forEach((p,i)=>{
const div=document.createElement('div');div.className='item incourt';
const actions=document.createElement('div');actions.className='actions';

const stay=document.createElement('span');stay.className='arrow';stay.innerHTML='üîÑ';
if(p.extraUsed)stay.classList.add('disabled');
stay.onclick=()=>stayOneMore(i);

const back=document.createElement('span');back.className='arrow';back.innerHTML='‚¨ÖÔ∏è';
back.onclick=()=>moveToWaiting(i);

actions.appendChild(stay);actions.appendChild(back);

div.innerHTML=`<span>${p.name}</span>`;
div.appendChild(actions);c.appendChild(div);
});
}

function addToWaitingList(){
const input=document.getElementById('nameInput');
const raw=input.value.trim();if(!raw)return;
const names=raw.split(',').map(n=>n.trim()).filter(n=>n);
names.forEach(n=>{state.waiting.push(n);if(!state.stats[n])state.stats[n]=0;});
input.value='';save();render();}

function moveToInCourt(index){
if(index!==0)return;
if(state.incourt.length>=state.maxInCourt)return;
const name=state.waiting.shift();
state.stats[name]=(state.stats[name]||0)+1; // game count
state.incourt.push({name:name,extraUsed:false});
save();render();}

function stayOneMore(i){
const p=state.incourt[i];
if(p.extraUsed)return;
p.extraUsed=true;
state.stats[p.name]=(state.stats[p.name]||0)+1; // extra game
save();render();}

function moveToWaiting(i){
const p=state.incourt.splice(i,1)[0];
state.waiting.push(p.name);
save();render();}

render();
</script>
</body>
</html>
